<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Graha Fitness ‚Äî Gym Management System with membership, attendance, finances, and food stock.">
    <title>Graha Fitness ‚Äî Gym Management</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>

<body>

    <!-- ==================== LOGIN PAGE ==================== -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-card">
            <div class="login-header">
                <span class="login-logo">üí™</span>
                <h1 data-i18n="welcome">Graha Fitness</h1>
                <p data-i18n="sign_in_hint">Sign in to your account</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label data-i18n="username">Username</label>
                    <input type="text" id="loginUser" placeholder="Enter username" data-i18n="placeholder_user" required
                        autocomplete="off">
                </div>
                <div class="form-group">
                    <label data-i18n="password">Password</label>
                    <input type="password" id="loginPass" placeholder="Enter password" data-i18n="placeholder_pass"
                        required>
                </div>
                <div class="login-error" id="loginError" style="display:none;"></div>
                <button type="submit" class="btn btn-primary btn-login" data-i18n="sign_in">Sign In</button>
            </form>
            <div class="login-hint">
                <p>Demo accounts:</p>
                <code>superadmin / admin123</code> &nbsp;‚Ä¢&nbsp; <code>admin / admin123</code>
            </div>
        </div>
    </div>

    <!-- ==================== APP SHELL ==================== -->
    <div class="app-shell" id="appShell" style="display:none;">

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üí™</span>
                    <span class="logo-text">Graha Fitness</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                    <span class="toggle-icon">‚ò∞</span>
                </button>
            </div>
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-label" data-i18n="dashboard">Dashboard</span>
                </a>
                <a href="#members" class="nav-item" data-page="members">
                    <span class="nav-icon">üë•</span>
                    <span class="nav-label" data-i18n="members">Members</span>
                </a>
                <a href="#finance" class="nav-item" data-page="finance">
                    <span class="nav-icon">üí∞</span>
                    <span class="nav-label" data-i18n="finance">Finance</span>
                </a>
                <a href="#stock" class="nav-item" data-page="stock">
                    <span class="nav-icon">ü•§</span>
                    <span class="nav-label" data-i18n="stock">Food Stock</span>
                </a>
                <a href="#scan" class="nav-item" data-page="scan">
                    <span class="nav-icon">üì∑</span>
                    <span class="nav-label" data-i18n="scan">Scan Check-in</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="user-badge" id="userBadge">
                    <div class="user-avatar" id="userAvatar">A</div>
                    <div class="user-info">
                        <span class="user-name" id="userName">Admin</span>
                        <span class="user-role" id="userRole">admin</span>
                    </div>
                </div>
                <div class="lang-switcher">
                    <button class="lang-btn" data-lang="id" onclick="app.setLanguage('id')">üáÆüá© ID</button>
                    <button class="lang-btn" data-lang="en" onclick="app.setLanguage('en')">üá∫üá∏ EN</button>
                </div>
                <button class="btn btn-sm btn-logout" id="btnLogout" data-i18n="logout">Logout</button>
                <div class="current-date" id="currentDate"></div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <header class="top-navbar">
                <div class="top-navbar-left">
                    <div id="inlineLoader" class="inline-loader hidden">
                        <div class="loader-spinner-sm"></div>
                        <span data-i18n="loading">Loading...</span>
                    </div>
                </div>
                <div class="top-navbar-right">
                    <div id="syncIndicator" class="sync-status online" title="Online">
                        <span class="sync-icon">‚óè</span>
                        <span class="sync-text" data-i18n="online">Online</span>
                    </div>
                    <button class="btn btn-primary btn-sm hidden" id="btnSyncNow" data-i18n="sync_now">Sync Now</button>
                </div>
            </header>

            <!-- ==================== DASHBOARD ==================== -->
            <section class="page" id="page-dashboard">
                <div class="page-header">
                    <h1 data-i18n="dashboard">Dashboard</h1>
                    <p class="page-subtitle" data-i18n="dash_subtitle">Overview of your gym operations</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-card stat-members">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-info">
                            <span class="stat-value" id="dashTotalMembers">0</span>
                            <span class="stat-label" data-i18n="active_members">Active Members</span>
                        </div>
                    </div>
                    <div class="stat-card stat-revenue">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <span class="stat-value" id="dashMonthRevenue">Rp 0</span>
                            <span class="stat-label" data-i18n="monthly_income">Monthly Revenue</span>
                        </div>
                    </div>
                    <div class="stat-card stat-checkins">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="dashTodayCheckins">0</span>
                            <span class="stat-label" data-i18n="today_checkins">Today's Check-ins</span>
                        </div>
                    </div>
                    <div class="stat-card stat-alerts">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-info">
                            <span class="stat-value" id="dashLowStock">0</span>
                            <span class="stat-label" data-i18n="low_stock">Low Stock Alerts</span>
                        </div>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div class="card recent-activity">
                        <div class="card-header">
                            <h2 data-i18n="recent_activity">Recent Activity</h2>
                        </div>
                        <div class="card-body">
                            <ul class="activity-list" id="dashRecentActivity">
                                <li class="activity-empty">No recent activity</li>
                            </ul>
                        </div>
                    </div>
                    <div class="card expiring-soon">
                        <div class="card-header">
                            <h2 data-i18n="expiring_soon">Expiring Memberships</h2>
                        </div>
                        <div class="card-body">
                            <ul class="expiry-list" id="dashExpiring">
                                <li class="activity-empty">No expiring memberships</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== MEMBERS ==================== -->
            <section class="page hidden" id="page-members">
                <div class="page-header">
                    <h1 data-i18n="members_header">Members & Attendance</h1>
                    <p class="page-subtitle" data-i18n="members_subtitle">Manage memberships, check-ins, and absences
                    </p>
                </div>
                <div class="toolbar">
                    <div class="search-box">
                        <span class="search-icon">üîç</span>
                        <input type="text" id="memberSearch" placeholder="Search members..."
                            data-i18n="placeholder_search_mem" autocomplete="off">
                    </div>
                    <button class="btn btn-primary" id="btnAddMember"><span data-i18n="new_member">+ Add
                            Member</span></button>
                </div>
                <div class="card">
                    <div class="table-wrapper">
                        <table class="data-table" id="membersTable">
                            <thead>
                                <tr>
                                    <th data-i18n="member_name">Name</th>
                                    <th data-i18n="phone">Phone</th>
                                    <th data-i18n="plan">Plan</th>
                                    <th data-i18n="expires">Expires</th>
                                    <th data-i18n="status">Status</th>
                                    <th data-i18n="actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="membersTableBody"></tbody>
                        </table>
                        <div class="table-empty" id="membersEmpty">
                            <span class="empty-icon">üë•</span>
                            <p data-i18n="members_empty">No members yet. Add your first member!</p>
                        </div>
                    </div>
                </div>
                <div class="card" style="margin-top:1.5rem;">
                    <div class="card-header">
                        <h2 data-i18n="today_attendance">Today's Attendance</h2>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-secondary btn-sm" id="btnExportAttendance"><span>üìã</span>
                                Report</button>
                            <button class="btn btn-danger btn-sm" id="btnClearAttendance"
                                style="display:none;"><span>üóëÔ∏è</span> Clear Logs</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <ul class="attendance-log" id="attendanceLog">
                            <li class="activity-empty">No check-ins today</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- ==================== FINANCE ==================== -->
            <section class="page hidden" id="page-finance">
                <div class="page-header">
                    <h1 data-i18n="finance_header">Financial Records</h1>
                    <p class="page-subtitle" data-i18n="finance_subtitle">Track income, expenses, and overall
                        profitability</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-card stat-income">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-info">
                            <span class="stat-value" id="finIncome">Rp 0</span>
                            <span class="stat-label">Monthly Income</span>
                        </div>
                    </div>
                    <div class="stat-card stat-expense">
                        <div class="stat-icon">üìâ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="finExpense">Rp 0</span>
                            <span class="stat-label">Monthly Expense</span>
                        </div>
                    </div>
                    <div class="stat-card stat-profit">
                        <div class="stat-icon">üíé</div>
                        <div class="stat-info">
                            <span class="stat-value" id="finProfit">Rp 0</span>
                            <span class="stat-label" data-i18n="net_profit">Net Profit</span>
                        </div>
                    </div>
                </div>
                <div class="toolbar">
                    <div class="filter-group">
                        <select id="finMonthFilter" class="select-input">
                            <option value="" data-i18n="all_months">All Months</option>
                        </select>
                        <select id="finTypeFilter" class="select-input">
                            <option value="" data-i18n="all_types">All Types</option>
                            <option value="income" data-i18n="income">Income</option>
                            <option value="expense" data-i18n="expense">Expense</option>
                        </select>
                    </div>
                    <div class="toolbar-actions">
                        <button class="btn btn-secondary" id="btnExportFinance"><span data-i18n="export_report">üìã
                                Export Report</span></button>
                        <button class="btn btn-primary" id="btnAddTransaction"><span data-i18n="new_transaction">+ Add
                                Transaction</span></button>
                    </div>
                </div>
                <div class="card">
                    <div class="table-wrapper">
                        <table class="data-table" id="financeTable">
                            <thead>
                                <tr>
                                    <th data-i18n="date">Date</th>
                                    <th data-i18n="type">Type</th>
                                    <th data-i18n="category">Category</th>
                                    <th data-i18n="reference">Reference</th>
                                    <th data-i18n="amount">Amount</th>
                                    <th data-i18n="note">Note</th>
                                    <th data-i18n="actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="financeTableBody"></tbody>
                        </table>
                        <div class="table-empty" id="financeEmpty">
                            <span class="empty-icon">üí∞</span>
                            <p data-i18n="finance_empty">No transactions yet. Start tracking your finances!</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== FOOD STOCK ==================== -->
            <section class="page hidden" id="page-stock">
                <div class="page-header">
                    <h1 data-i18n="stock_header">Food Stock</h1>
                    <p class="page-subtitle" data-i18n="stock_subtitle">Inventory management and stock alerts</p>
                </div>
                <div class="toolbar">
                    <div class="search-box">
                        <span class="search-icon">üîç</span>
                        <input type="text" id="stockSearch" placeholder="Search items..." autocomplete="off">
                    </div>
                    <div class="toolbar-actions">
                        <button class="btn btn-secondary" id="btnStockMovement" data-i18n="stock_movement">üì¶ Stock
                            Movement</button>
                        <button class="btn btn-primary" id="btnAddStock" data-i18n="add_item"><span>+</span> Add
                            Item</button>
                    </div>
                </div>
                <div class="card">
                    <div class="table-wrapper">
                        <table class="data-table" id="stockTable">
                            <thead>
                                <tr>
                                    <th data-i18n="item_name">Item</th>
                                    <th data-i18n="category">Category</th>
                                    <th data-i18n="quantity">Quantity</th>
                                    <th data-i18n="unit">Unit</th>
                                    <th data-i18n="status">Status</th>
                                    <th data-i18n="actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="stockTableBody"></tbody>
                        </table>
                        <div class="table-empty" id="stockEmpty">
                            <span class="empty-icon">ü•§</span>
                            <p data-i18n="stock_empty">No stock items yet. Add your first item!</p>
                        </div>
                    </div>
                </div>
                <div class="card" style="margin-top:1.5rem;">
                    <div class="card-header">
                        <h2 data-i18n="recent_stock_movements">Recent Stock Movements</h2>
                    </div>
                    <div class="card-body">
                        <ul class="movement-log" id="stockMovementLog">
                            <li class="activity-empty" data-i18n="stock_movements_empty">No stock movements recorded
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- ==================== SCAN CHECK-IN ==================== -->
            <section class="page hidden" id="page-scan">
                <div class="page-header">
                    <h1 data-i18n="scan">Scan Check-in</h1>
                    <p class="page-subtitle" data-i18n="scan_subtitle">Members can check in by scanning their QR code
                    </p>
                </div>
                <div class="scan-container">
                    <div class="card scan-card">
                        <div class="card-body" style="text-align:center; padding:2rem;">
                            <div class="scan-input-area">
                                <span style="font-size:3rem;">üì∑</span>
                                <p style="color:var(--text-secondary); margin:1rem 0;" data-i18n="scan_instruction">
                                    Enter or paste a member ID to
                                    check in</p>
                                <div class="form-group"
                                    style="max-width:400px; margin:0 auto; display: flex; gap: 0.5rem; flex-direction: column;">
                                    <input type="text" id="scanInput" placeholder="Scan QR, Phone, or Member ID..."
                                        autocomplete="off">
                                    <div style="display: flex; gap: 0.5rem; justify-content: center;">
                                        <button class="btn btn-primary" id="btnScanCheckin" data-i18n="scan_btn">Check
                                            In</button>
                                        <button class="btn btn-secondary" id="btnToggleCamera"
                                            data-i18n="camera_btn">Scan Camera</button>
                                    </div>
                                </div>
                                <div id="reader"
                                    style="width: 100%; max-width: 500px; margin: 1.5rem auto 0; display: none;"></div>
                            </div>
                            <div id="scanResult" class="scan-result" style="display:none; margin-top: 1.5rem;"></div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- ==================== MODALS ==================== -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modal">
            <div class="modal-header">
                <h2 id="modalTitle">Title</h2>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>